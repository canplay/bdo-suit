import{Q as V}from"./QImg.221eff66.js";import{Q as x,c as _,d as r,e as m,i as D}from"./QPage.5b0197cd.js";import{A as N,B as b,r as h,o as A,C as v,aw as f,f as l,E as t,F as y,K as e,ax as k,H as F,J as w,Q as p,D as Q,ay as u}from"./index.53ff0679.js";import{Q as C}from"./QForm.49140cb3.js";import{a as T,u as g}from"./fetch.a4faf46b.js";import{_ as S}from"./itemComp.204348e4.js";import"./axios.034f9684.js";const I={class:"row q-gutter-md"},U={class:"text-h6"},P={class:"row"},L={class:"col text-caption"},M={class:"col text-caption"},$={class:"row"},q={class:"col"},H={class:"col"},K={class:"row"},W={class:"col"},J={class:"col"},j={class:"row"},z={class:"col"},G={class:"col"},O={class:"row"},R={class:"col"},X={class:"col"},Y={class:"row"},Z={class:"col"},ee={class:"col"},se={class:"row"},le={class:"col"},ae={class:"col"},oe=e("div",{style:{height:"8px"}},null,-1),ue={class:"row"},te=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),ne=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),de=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),ie=e("div",{style:{height:"8px"}},null,-1),ce={class:"row"},re=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),me=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),_e=e("div",{class:"col-auto",style:{width:"8px"}},null,-1),ge=N({__name:"MyPage",setup(ve){const o=T(),d=b(),n=h({username:"",password:"",familyName:""}),i=h({variousNo:"",enchantLevel:"0",itemCount:"0"}),E=()=>{let c=setTimeout(()=>{o.loading.hide(),clearTimeout(c)},12e4);o.loading.show(),g().post(d.backend+"/api/user/update",{userNo:d.user.userno,username:n.value.username,password:n.value.password,userNickname:n.value.familyName},o.cookies.get("canplay_token")).then(a=>{if(o.loading.hide(),clearTimeout(c),a.data.status===0){o.notify(a.data.msg);return}o.notify("\u4FEE\u6539\u6210\u529F")}).catch(()=>{o.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),o.loading.hide(),clearTimeout(c)})},B=()=>{let c=setTimeout(()=>{o.loading.hide(),clearTimeout(c)},12e4);o.loading.show(),g().post(d.backend+"/api/user/mail",{receiverName:d.user.username,receiverUserNo:d.user.userno,variousNo:parseInt(i.value.variousNo),enchantLevel:parseInt(i.value.enchantLevel),itemCount:parseInt(i.value.itemCount)},o.cookies.get("canplay_token")).then(a=>{if(o.loading.hide(),clearTimeout(c),a.data.status===0){o.notify(a.data.msg);return}o.notify("\u53D1\u9001\u90AE\u4EF6\u6210\u529F")}).catch(()=>{o.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),o.loading.hide(),clearTimeout(c)})};return A(()=>{n.value.username=d.user.username,n.value.password=d.user.password,n.value.familyName=d.user.familyname}),(c,a)=>(v(),f(y,null,[l(x,{padding:""},{default:t(()=>[e("div",I,[(v(!0),f(y,null,k(F(d).user.characters,s=>(v(),Q(_,{class:"col-auto",style:{width:"100%","max-width":"400px"},key:s},{default:t(()=>[l(V,{src:"imgs/logo.png"}),l(r,null,{default:t(()=>[e("div",U,"\u89D2\u8272\u540D: "+u(s.characterName),1),e("div",P,[e("div",L,"\u7B49\u7EA7: "+u(s.level),1),e("div",M," \u6E38\u73A9\u65F6\u957F: "+u(s.totalPlayTime),1)])]),_:2},1024),l(D),l(r,{class:"text-body1"},{default:t(()=>[e("div",$,[e("div",q,"\u7ECF\u9A8C\u503C: "+u(s.experience),1),e("div",H,"\u5584\u6076\u503E\u5411: "+u(s.tendency),1)]),e("div",K,[e("div",W,"\u8D1F\u91CD: "+u(s.variedWeight),1),e("div",J,"\u80CC\u5305\u6570\u91CF: "+u(s.inventorySlotCount),1)]),e("div",j,[e("div",z,"HP: "+u(s.hp),1),e("div",G,"MP: "+u(s.mp),1)]),e("div",O,[e("div",R,"SP: "+u(s.sp),1),e("div",X,"WP: "+u(s.wp),1)]),e("div",Y,[e("div",Z,"\u5934\u8854: "+u(s.titleKey),1),e("div",ee,"\u9632\u5FA1\u529B: "+u(s.defenceValue),1)]),e("div",se,[e("div",le,"\u653B\u51FB\u529B: "+u(s.offenceValue),1),e("div",ae,"\u89C9\u9192\u653B\u51FB\u529B: "+u(s.awakenValue),1)])]),_:2},1024)]),_:2},1024))),128))]),oe,l(_,null,{default:t(()=>[l(r,{class:"text-h6"},{default:t(()=>[w("\u81EA\u52A9\u4FEE\u6539")]),_:1}),l(r,null,{default:t(()=>[l(C,{onSubmit:E},{default:t(()=>[e("div",ue,[l(m,{class:"col",modelValue:n.value.username,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value.username=s),label:"\u7528\u6237\u540D"},null,8,["modelValue"]),te,l(m,{class:"col",modelValue:n.value.password,"onUpdate:modelValue":a[1]||(a[1]=s=>n.value.password=s),label:"\u5BC6\u7801"},null,8,["modelValue"]),ne,l(m,{class:"col",modelValue:n.value.familyName,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value.familyName=s),label:"\u5BB6\u65CF\u540D"},null,8,["modelValue"]),de,l(p,{class:"col",color:"primary",label:"\u4FEE\u6539",type:"submit"})])]),_:1})]),_:1})]),_:1}),ie,l(_,null,{default:t(()=>[l(r,{class:"text-h6"},{default:t(()=>[w("\u81EA\u52A9\u90AE\u4EF6")]),_:1}),l(r,null,{default:t(()=>[l(C,{onSubmit:B},{default:t(()=>[e("div",ce,[l(m,{class:"col",modelValue:i.value.variousNo,"onUpdate:modelValue":a[4]||(a[4]=s=>i.value.variousNo=s),label:"\u7269\u54C1ID"},{append:t(()=>[l(p,{color:"primary",label:"ID\u5217\u8868",onClick:a[3]||(a[3]=s=>F(d).dialog.items=!0)})]),_:1},8,["modelValue"]),re,l(m,{class:"col",modelValue:i.value.enchantLevel,"onUpdate:modelValue":a[5]||(a[5]=s=>i.value.enchantLevel=s),label:"\u5F3A\u5316\u7B49\u7EA7"},null,8,["modelValue"]),me,l(m,{class:"col",modelValue:i.value.itemCount,"onUpdate:modelValue":a[6]||(a[6]=s=>i.value.itemCount=s),label:"\u7269\u54C1\u6570\u91CF"},null,8,["modelValue"]),_e,l(p,{class:"col",color:"primary",label:"\u53D1\u9001",type:"submit"})])]),_:1})]),_:1})]),_:1})]),_:1}),l(S)],64))}});export{ge as default};
