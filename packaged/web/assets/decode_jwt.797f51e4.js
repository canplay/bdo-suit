import{c as h,j as q,r as d,w as z,n as k,h as c,L as B,l as L,M as P}from"./index.0f12b29b.js";const A={ratio:[String,Number]};function $(e,t){return h(()=>{const i=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:`${100/i}%`}:null})}const x=16/9;var H=q({name:"QImg",props:{...A,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:x},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:i}){const l=d(e.initialRatio),s=$(e,l);let r=null,m=!1;const a=[d(null),d(S())],o=d(0),g=d(!1),f=d(!1),E=h(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),J=h(()=>({width:e.width,height:e.height})),C=h(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),R=h(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));z(()=>b(),w);function b(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function S(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function w(n){r!==null&&(clearTimeout(r),r=null),f.value=!1,n===null?(g.value=!1,a[o.value^1].value=S()):g.value=!0,a[o.value].value=n}function j({target:n}){m!==!0&&(r!==null&&(clearTimeout(r),r=null),l.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,_(n,1))}function _(n,v){m===!0||v===1e3||(n.complete===!0?I(n):r=setTimeout(()=>{r=null,_(n,v+1)},50))}function I(n){m!==!0&&(o.value=o.value^1,a[o.value].value=null,g.value=!1,f.value=!1,i("load",n.currentSrc||n.src))}function N(n){r!==null&&(clearTimeout(r),r=null),g.value=!1,f.value=!0,a[o.value].value=null,a[o.value^1].value=S(),i("error",n)}function T(n){const v=a[n].value,y={key:"img_"+n,class:C.value,style:R.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...v};return o.value===n?(y.class+=" q-img__image--waiting",Object.assign(y,{onLoad:j,onError:N})):y.class+=" q-img__image--loaded",c("div",{class:"q-img__container absolute-full",key:"img"+n},c("img",y))}function W(){return g.value!==!0?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},L(t[f.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[c(P,{color:e.spinnerColor,size:e.spinnerSize})])}return w(b()),k(()=>{m=!0,r!==null&&(clearTimeout(r),r=null)}),()=>{const n=[];return s.value!==null&&n.push(c("div",{key:"filler",style:s.value})),f.value!==!0&&(a[0].value!==null&&n.push(T(0)),a[1].value!==null&&n.push(T(1))),n.push(c(B,{name:"q-transition--fade"},W)),c("div",{class:E.value,style:J.value,role:"img","aria-label":e.alt},n)}}});new TextEncoder;const O=new TextDecoder,D=e=>{const t=atob(e),i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i},F=e=>{let t=e;t instanceof Uint8Array&&(t=O.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return D(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Q extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var i;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}class u extends Q{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function M(e){return typeof e=="object"&&e!==null}function U(e){if(!M(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const p=F;function V(e){if(typeof e!="string")throw new u("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:i}=e.split(".");if(i===5)throw new u("Only JWTs using Compact JWS serialization can be decoded");if(i!==3)throw new u("Invalid JWT");if(!t)throw new u("JWTs must contain a payload");let l;try{l=p(t)}catch{throw new u("Failed to parse the base64url encoded payload")}let s;try{s=JSON.parse(O.decode(l))}catch{throw new u("Failed to parse the decoded payload as JSON")}if(!U(s))throw new u("Invalid JWT Claims Set");return s}export{H as Q,V as d};
