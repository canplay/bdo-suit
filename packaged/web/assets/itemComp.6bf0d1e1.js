import{j as F,aQ as w,aR as b,c as h,h as _,l as E,A as y,B as Q,r as k,o as A,C as P,D as V,E as l,f as s,V as T,H as v}from"./index.3ad22dde.js";import{d as I,f as q,e as x,c as N}from"./QPage.4a32b107.js";import{a as S,g as U,u as C}from"./fetch.efc0a39c.js";var z=F({name:"QCardActions",props:{...w,vertical:Boolean},setup(d,{slots:e}){const n=b(d),a=h(()=>`q-card__actions ${n.value} q-card__actions--${d.vertical===!0?"vert column":"horiz row"}`);return()=>_("div",{class:a.value},E(e.default))}});const H=y({__name:"itemComp",setup(d){const e=S(),n=Q(),a=k({pagination:{page:1,rowsNumber:0,rowsPerPage:7,sortBy:"",descending:!0},filter:"",columns:[{name:"gameid",label:"ID",field:"gameid",align:"center",sortable:!0},{name:"name",label:"\u540D\u79F0",field:"name",align:"center",sortable:!0}],rows:[]}),p=m=>{let t=setTimeout(()=>{e.loading.hide(),clearTimeout(t)},12e4);e.loading.show();const{page:o,rowsPerPage:r,sortBy:g,descending:f,rowsNumber:B}=m.pagination,D=m.filter;a.value.rows=[],C().post(n.backend+"/api/items/count",{filter:a.value.filter},e.cookies.get("canplay_token")).then(c=>{if(e.loading.hide(),clearTimeout(t),a.value.pagination.rowsNumber=parseInt(c.data.msg),c.data.status===0||parseInt(c.data.msg)<=0){e.notify("\u6CA1\u6709\u627E\u5230\u7269\u54C1");return}C().post(n.backend+"/api/items/info",{filter:D,curPage:(o-1)*r,maxPage:r===0?B:r,sortBy:g===""?"gameid":g,descending:f},e.cookies.get("canplay_token")).then(u=>{if(e.loading.hide(),clearTimeout(t),u.data.status!=0)for(let i=0;i<u.data.msg.length&&u.data.msg[i].id!=="";++i)a.value.rows.push({gameid:u.data.msg[i].gameid,name:u.data.msg[i].name});else e.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");a.value.pagination.page=o,a.value.pagination.rowsPerPage=r,a.value.pagination.sortBy=g,a.value.pagination.descending=f}).catch(()=>{e.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),e.loading.hide(),clearTimeout(t)})}).catch(()=>{e.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),e.loading.hide(),clearTimeout(t)})};return A(()=>{p({pagination:a.value.pagination})}),(m,t)=>(P(),V(U,{modelValue:v(n).dialog.items,"onUpdate:modelValue":t[2]||(t[2]=o=>v(n).dialog.items=o)},{default:l(()=>[s(N,null,{default:l(()=>[s(I,null,{default:l(()=>[s(q,{title:"\u7269\u54C1ID\u5217\u8868",rows:a.value.rows,columns:a.value.columns,"row-key":"gameids",separator:"cell",pagination:a.value.pagination,"onUpdate:pagination":t[1]||(t[1]=o=>a.value.pagination=o),filter:a.value.filter,onRequest:p},{"top-right":l(()=>[s(x,{filled:"",dense:"",debounce:"1000",modelValue:a.value.filter,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.filter=o),label:"\u67E5\u627E"},{append:l(()=>[s(T,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","pagination","filter"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{z as Q,H as _};
