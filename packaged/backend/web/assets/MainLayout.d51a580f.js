import{c as d,j as Q,r as b,w as C,k as W,h,l as X,m as N,Q as Y,u as Z,n as ee,p as k,q as te,i as j,s as P,g as I,t as A,v as U,x as G,y as ae,z as J,A as F,a as le,B as ne,C as oe,D as ie,E as re,G as x,H as ue,f as _,I as se,d as ce,J as de,K as M}from"./index.1c45b821.js";import{u as fe,a as ve,b as ge,Q as he}from"./QTabs.9745b7f4.js";import{Q as H,a as me,u as ye,b as be,c as we}from"./fetch.b1938a1f.js";import{u as Se}from"./vue-i18n.runtime.esm-bundler.30e64d4a.js";import"./axios.5ae3226a.js";const pe={ratio:[String,Number]};function _e(e,a){return d(()=>{const u=Number(e.ratio||(a!==void 0?a.value:void 0));return isNaN(u)!==!0&&u>0?{paddingBottom:`${100/u}%`}:null})}const ze=16/9;var Ce=Q({name:"QImg",props:{...pe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ze},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:u}){const n=b(e.initialRatio),t=_e(e,n);let o=null,f=!1;const v=[b(null),b(z())],i=b(0),g=b(!1),y=b(!1),R=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),V=d(()=>({width:e.width,height:e.height})),p=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),T=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));C(()=>w(),$);function w(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function z(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function $(c){o!==null&&(clearTimeout(o),o=null),y.value=!1,c===null?(g.value=!1,v[i.value^1].value=z()):g.value=!0,v[i.value].value=c}function r({target:c}){f!==!0&&(o!==null&&(clearTimeout(o),o=null),n.value=c.naturalHeight===0?.5:c.naturalWidth/c.naturalHeight,S(c,1))}function S(c,E){f===!0||E===1e3||(c.complete===!0?s(c):o=setTimeout(()=>{o=null,S(c,E+1)},50))}function s(c){f!==!0&&(i.value=i.value^1,v[i.value].value=null,g.value=!1,y.value=!1,u("load",c.currentSrc||c.src))}function l(c){o!==null&&(clearTimeout(o),o=null),g.value=!1,y.value=!0,v[i.value].value=null,v[i.value^1].value=z(),u("error",c)}function m(c){const E=v[c].value,B={key:"img_"+c,class:p.value,style:T.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...E};return i.value===c?(B.class+=" q-img__image--waiting",Object.assign(B,{onLoad:r,onError:l})):B.class+=" q-img__image--loaded",h("div",{class:"q-img__container absolute-full",key:"img"+c},h("img",B))}function q(){return g.value!==!0?h("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},N(a[y.value===!0?"error":"default"])):h("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():e.noSpinner===!0?void 0:[h(Y,{color:e.spinnerColor,size:e.spinnerSize})])}return $(w()),W(()=>{f=!0,o!==null&&(clearTimeout(o),o=null)}),()=>{const c=[];return t.value!==null&&c.push(h("div",{key:"filler",style:t.value})),y.value!==!0&&(v[0].value!==null&&c.push(m(0)),v[1].value!==null&&c.push(m(1))),c.push(h(X,{name:"q-transition--fade"},q)),h("div",{class:R.value,style:V.value,role:"img","aria-label":e.alt},c)}}}),O=Q({name:"QRouteTab",props:{...Z,...fe},emits:ve,setup(e,{slots:a,emit:u}){const n=ee({useDisableForRouterLinkProps:!1}),{renderTab:t,$tabs:o}=ge(e,a,u,{exact:d(()=>e.exact),...n});return C(()=>`${e.name} | ${e.exact} | ${(n.resolvedLink.value||{}).href}`,()=>{o.verifyRouteModel()}),()=>t(n.linkTag.value,n.linkAttrs.value)}}),D=Q({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:a}){const u=d(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>h("div",{class:u.value,role:"toolbar"},N(a.default))}}),Te=Q({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:u}){const{proxy:{$q:n}}=I(),t=j(P,k);if(t===k)return console.error("QHeader needs to be child of QLayout"),k;const o=b(parseInt(e.heightHint,10)),f=b(!0),v=d(()=>e.reveal===!0||t.view.value.indexOf("H")>-1||n.platform.is.ios&&t.isContainer.value===!0),i=d(()=>{if(e.modelValue!==!0)return 0;if(v.value===!0)return f.value===!0?o.value:0;const r=o.value-t.scroll.value.position;return r>0?r:0}),g=d(()=>e.modelValue!==!0||v.value===!0&&f.value!==!0),y=d(()=>e.modelValue===!0&&g.value===!0&&e.reveal===!0),R=d(()=>"q-header q-layout__section--marginal "+(v.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(g.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),V=d(()=>{const r=t.rows.value.top,S={};return r[0]==="l"&&t.left.space===!0&&(S[n.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),r[2]==="r"&&t.right.space===!0&&(S[n.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),S});function p(r,S){t.update("header",r,S)}function T(r,S){r.value!==S&&(r.value=S)}function w({height:r}){T(o,r),p("size",r)}function z(r){y.value===!0&&T(f,!0),u("focusin",r)}C(()=>e.modelValue,r=>{p("space",r),T(f,!0),t.animate()}),C(i,r=>{p("offset",r)}),C(()=>e.reveal,r=>{r===!1&&T(f,e.modelValue)}),C(f,r=>{t.animate(),u("reveal",r)}),C(t.scroll,r=>{e.reveal===!0&&T(f,r.direction==="up"||r.position<=e.revealOffset||r.position-r.inflectionPoint<100)});const $={};return t.instances.header=$,e.modelValue===!0&&p("size",o.value),p("space",e.modelValue),p("offset",i.value),W(()=>{t.instances.header===$&&(t.instances.header=void 0,p("size",0),p("offset",0),p("space",!1))}),()=>{const r=te(a.default,[]);return e.elevated===!0&&r.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(h(H,{debounce:0,onResize:w})),h("header",{class:R.value,style:V.value,onFocusin:z},r)}}}),$e=Q({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:a}){const u=d(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>h("div",{class:u.value},N(a.default))}}),qe=Q({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:u}){const{proxy:{$q:n}}=I(),t=j(P,k);if(t===k)return console.error("QFooter needs to be child of QLayout"),k;const o=b(parseInt(e.heightHint,10)),f=b(!0),v=b(A.value===!0||t.isContainer.value===!0?0:window.innerHeight),i=d(()=>e.reveal===!0||t.view.value.indexOf("F")>-1||n.platform.is.ios&&t.isContainer.value===!0),g=d(()=>t.isContainer.value===!0?t.containerHeight.value:v.value),y=d(()=>{if(e.modelValue!==!0)return 0;if(i.value===!0)return f.value===!0?o.value:0;const l=t.scroll.value.position+g.value+o.value-t.height.value;return l>0?l:0}),R=d(()=>e.modelValue!==!0||i.value===!0&&f.value!==!0),V=d(()=>e.modelValue===!0&&R.value===!0&&e.reveal===!0),p=d(()=>"q-footer q-layout__section--marginal "+(i.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(R.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(i.value!==!0?" hidden":""):"")),T=d(()=>{const l=t.rows.value.bottom,m={};return l[0]==="l"&&t.left.space===!0&&(m[n.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),l[2]==="r"&&t.right.space===!0&&(m[n.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),m});function w(l,m){t.update("footer",l,m)}function z(l,m){l.value!==m&&(l.value=m)}function $({height:l}){z(o,l),w("size",l)}function r(){if(e.reveal!==!0)return;const{direction:l,position:m,inflectionPoint:q}=t.scroll.value;z(f,l==="up"||m-q<100||t.height.value-g.value-m-o.value<300)}function S(l){V.value===!0&&z(f,!0),u("focusin",l)}C(()=>e.modelValue,l=>{w("space",l),z(f,!0),t.animate()}),C(y,l=>{w("offset",l)}),C(()=>e.reveal,l=>{l===!1&&z(f,e.modelValue)}),C(f,l=>{t.animate(),u("reveal",l)}),C([o,t.scroll,t.height],r),C(()=>n.screen.height,l=>{t.isContainer.value!==!0&&z(v,l)});const s={};return t.instances.footer=s,e.modelValue===!0&&w("size",o.value),w("space",e.modelValue),w("offset",y.value),W(()=>{t.instances.footer===s&&(t.instances.footer=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const l=U(a.default,[h(H,{debounce:0,onResize:$})]);return e.elevated===!0&&l.push(h("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),h("footer",{class:p.value,style:T.value,onFocusin:S},l)}}}),ke=Q({name:"QPageContainer",setup(e,{slots:a}){const{proxy:{$q:u}}=I(),n=j(P,k);if(n===k)return console.error("QPageContainer needs to be child of QLayout"),k;G(ae,!0);const t=d(()=>{const o={};return n.header.space===!0&&(o.paddingTop=`${n.header.size}px`),n.right.space===!0&&(o[`padding${u.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(o.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(o[`padding${u.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),o});return()=>h("div",{class:"q-page-container",style:t.value},N(a.default))}}),Re=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:a,emit:u}){const{proxy:{$q:n}}=I(),t=b(null),o=b(n.screen.height),f=b(e.container===!0?0:n.screen.width),v=b({position:0,direction:"down",inflectionPoint:0}),i=b(0),g=b(A.value===!0?0:J()),y=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),R=d(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),V=d(()=>g.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${g.value}px`}:null),p=d(()=>g.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${g.value}px`,width:`calc(100% + ${g.value}px)`}:null);function T(s){if(e.container===!0||document.qScrollPrevented!==!0){const l={position:s.position.top,direction:s.direction,directionChanged:s.directionChanged,inflectionPoint:s.inflectionPoint.top,delta:s.delta.top};v.value=l,e.onScroll!==void 0&&u("scroll",l)}}function w(s){const{height:l,width:m}=s;let q=!1;o.value!==l&&(q=!0,o.value=l,e.onScrollHeight!==void 0&&u("scrollHeight",l),$()),f.value!==m&&(q=!0,f.value=m),q===!0&&e.onResize!==void 0&&u("resize",s)}function z({height:s}){i.value!==s&&(i.value=s,$())}function $(){if(e.container===!0){const s=o.value>i.value?J():0;g.value!==s&&(g.value=s)}}let r=null;const S={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:t,height:o,containerHeight:i,scrollbarWidth:g,totalWidth:d(()=>f.value+g.value),rows:d(()=>{const s=e.view.toLowerCase().split(" ");return{top:s[0].split(""),middle:s[1].split(""),bottom:s[2].split("")}}),header:F({size:0,offset:0,space:!1}),right:F({size:300,offset:0,space:!1}),footer:F({size:0,offset:0,space:!1}),left:F({size:300,offset:0,space:!1}),scroll:v,animate(){r!==null?clearTimeout(r):document.body.classList.add("q-body--layout-animate"),r=setTimeout(()=>{r=null,document.body.classList.remove("q-body--layout-animate")},155)},update(s,l,m){S[s][l]=m}};if(G(P,S),J()>0){let m=function(){s=null,l.classList.remove("hide-scrollbar")},q=function(){if(s===null){if(l.scrollHeight>n.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(s);s=setTimeout(m,300)},c=function(E){s!==null&&E==="remove"&&(clearTimeout(s),m()),window[`${E}EventListener`]("resize",q)},s=null;const l=document.body;C(()=>e.container!==!0?"add":"remove",c),e.container!==!0&&c("add"),le(()=>{c("remove")})}return()=>{const s=U(a.default,[h(me,{onScroll:T}),h(H,{onResize:w})]),l=h("div",{class:y.value,style:R.value,ref:e.container===!0?void 0:t,tabindex:-1},s);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:t},[h(H,{onResize:z}),h("div",{class:"absolute-full",style:V.value},[h("div",{class:"scroll",style:p.value},[l])])]):l}}});new TextEncoder;const K=new TextDecoder,xe=e=>{const a=atob(e),u=new Uint8Array(a.length);for(let n=0;n<a.length;n++)u[n]=a.charCodeAt(n);return u},Qe=e=>{let a=e;a instanceof Uint8Array&&(a=K.decode(a)),a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return xe(a)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ve extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var u;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(u=Error.captureStackTrace)===null||u===void 0||u.call(Error,this,this.constructor)}}class L extends Ve{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function Ee(e){return typeof e=="object"&&e!==null}function Le(e){if(!Ee(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let a=e;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(e)===a}const Oe=Qe;function Be(e){if(typeof e!="string")throw new L("JWTs must use Compact JWS serialization, JWT must be a string");const{1:a,length:u}=e.split(".");if(u===5)throw new L("Only JWTs using Compact JWS serialization can be decoded");if(u!==3)throw new L("Invalid JWT");if(!a)throw new L("JWTs must contain a payload");let n;try{n=Oe(a)}catch{throw new L("Failed to parse the base64url encoded payload")}let t;try{t=JSON.parse(K.decode(n))}catch{throw new L("Failed to parse the decoded payload as JSON")}if(!Le(t))throw new L("Invalid JWT Claims Set");return t}const Fe=M("div",{class:"col-auto",style:{width:"30px"}},null,-1),He=M("div",{class:"col-auto",style:{width:"30px"}},null,-1),je=ne({__name:"MainLayout",setup(e){const a=be(),u=oe(),{locale:n}=Se({useScope:"global"});n.value=navigator.language;const t=[{value:"en-US",label:"English"},{value:"zh-CN",label:"\u7B80\u4F53\u4E2D\u6587"}],o=b("index"),f=v=>{var i;(i=document.getElementById(v))==null||i.scrollIntoView()};if(a.cookies.has("canplay_token")&&a.cookies.get("canplay_token")!=""){const v=Be(a.cookies.get("canplay_token")).id;ye().get(u.backend+"/api/user/info/"+v,a.cookies.get("canplay_token")).then(i=>{if(i.data.status===0){a.notify(i.data.msg);return}let g=i.data.msg.userId.split(",");u.user={signin:!0,username:g[0],password:g[1],familyname:i.data.msg.userNickname,cash:0,pearl:0}}).catch(()=>{a.notify("\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")})}return(v,i)=>{const g=ue("router-view");return ie(),re(Re,{view:"hHh LpR fFf",style:{"background-image":"url(imgs/bg.jpg)","background-position":"right bottom, left top","background-repeat":"no-repeat, no-repeat","background-size":"100% 100%"}},{default:x(()=>[_(Te,{elevated:""},{default:x(()=>[_(D,{class:"bg-grey-10 text-white row"},{default:x(()=>[_(Ce,{class:"col-auto",src:"imgs/logo.png",width:"240px"}),Fe,_(he,{class:"col",modelValue:o.value,"onUpdate:modelValue":i[4]||(i[4]=y=>o.value=y)},{default:x(()=>[_(O,{name:"index",label:v.$t("index"),to:"/"},null,8,["label"]),_(O,{name:"news",label:v.$t("news"),onClick:i[0]||(i[0]=y=>f("news"))},null,8,["label"]),_(O,{name:"shop",label:v.$t("shop.title"),onClick:i[1]||(i[1]=y=>f("shop"))},null,8,["label"]),_(O,{name:"downloads",label:v.$t("downloads.title"),onClick:i[2]||(i[2]=y=>f("downloads"))},null,8,["label"]),_(O,{name:"social",label:v.$t("social"),onClick:i[3]||(i[3]=y=>f("social"))},null,8,["label"])]),_:1},8,["modelValue"]),He,_(we,{dark:"",class:"col-auto",modelValue:se(n),"onUpdate:modelValue":i[5]||(i[5]=y=>ce(n)?n.value=y:null),options:t,label:"Global","map-options":"","emit-value":""},null,8,["modelValue"])]),_:1})]),_:1}),_(qe,{elevated:""},{default:x(()=>[_(D,{class:"bg-grey-10 text-white text-center"},{default:x(()=>[_($e,{style:{"font-size":"medium"}},{default:x(()=>[de(" Powered by CaNplay ")]),_:1})]),_:1})]),_:1}),_(ke,null,{default:x(()=>[_(g)]),_:1})]),_:1})}}});export{je as default};
